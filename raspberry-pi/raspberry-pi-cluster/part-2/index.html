



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://agarthetiger.github.io/mkdocs/raspberry-pi/raspberry-pi-cluster/part-2/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.0.4">
    
    
      
        <title>Part 2 - Smart cooling - Software Engineering Notes</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.451f80e5.css">
      
      
    
    
      <script src="../../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../../../#part-2-smart-cooling" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://agarthetiger.github.io/mkdocs/" title="Software Engineering Notes" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Software Engineering Notes
              </span>
              <span class="md-header-nav__topic">
                Part 2 - Smart cooling
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/agarthetiger/mkdocs/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      agarthetiger/mkdocs
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://agarthetiger.github.io/mkdocs/" title="Software Engineering Notes" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Software Engineering Notes
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/agarthetiger/mkdocs/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      agarthetiger/mkdocs
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Ansible
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Ansible
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../ansible/collections/" title="Collections" class="md-nav__link">
      Collections
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../ansible/extending-ansible/" title="Extending Ansible" class="md-nav__link">
      Extending Ansible
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../ansible/filters/" title="Filters" class="md-nav__link">
      Filters
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../ansible/inventory-plugins/" title="Inventory Plugins" class="md-nav__link">
      Inventory Plugins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../ansible/local-actions/" title="Local actions" class="md-nav__link">
      Local actions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../ansible/lookup-plugins/" title="Lookup Plugins" class="md-nav__link">
      Lookup Plugins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../ansible/playbooks/" title="Playbooks" class="md-nav__link">
      Playbooks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../ansible/roles/" title="Roles" class="md-nav__link">
      Roles
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../ansible/selinux/" title="SELinux" class="md-nav__link">
      SELinux
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../ansible/tools/" title="Ansible tools" class="md-nav__link">
      Ansible tools
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../ansible/tower/" title="Ansible Tower" class="md-nav__link">
      Ansible Tower
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../ansible/vars-and-facts/" title="Vars and Facts" class="md-nav__link">
      Vars and Facts
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Bash
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Bash
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../bash/reference/" title="Bash reference" class="md-nav__link">
      Bash reference
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Cheat sheets
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Cheat sheets
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cheat-sheets/ansible/" title="Ansible Cheat Sheet" class="md-nav__link">
      Ansible Cheat Sheet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cheat-sheets/jenkins/" title="Jenkins" class="md-nav__link">
      Jenkins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cheat-sheets/markdown/" title="Markdown" class="md-nav__link">
      Markdown
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cheat-sheets/python/" title="Python Quick Reference" class="md-nav__link">
      Python Quick Reference
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cheat-sheets/vagrant/" title="Vagrant" class="md-nav__link">
      Vagrant
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Cnc
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Cnc
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cnc/sienci-mill-one/" title="Sienci Mill One" class="md-nav__link">
      Sienci Mill One
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Jenkins
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Jenkins
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../jenkins/JenkinsPlugins/" title="Jenkins Plugins" class="md-nav__link">
      Jenkins Plugins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../jenkins/PipelineDSL/" title="Pipeline DSL Notes" class="md-nav__link">
      Pipeline DSL Notes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../jenkins/PipelineSteps/" title="Pipeline Steps" class="md-nav__link">
      Pipeline Steps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../jenkins/administration/" title="Jenkins Administration" class="md-nav__link">
      Jenkins Administration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../jenkins/jengu/" title="Jengu" class="md-nav__link">
      Jengu
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Linux
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Linux
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../linux/ius/" title="IUS" class="md-nav__link">
      IUS
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Openshift
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Openshift
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../openshift/glossary/" title="Glossary" class="md-nav__link">
      Glossary
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../openshift/oc-and-ansible-k8s/" title="oc and Ansible k8s" class="md-nav__link">
      oc and Ansible k8s
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Puppet
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Puppet
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../puppet/puppet/" title="Puppet" class="md-nav__link">
      Puppet
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Python
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Python
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../python/mkdocs/" title="MKDocs" class="md-nav__link">
      MKDocs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../python/packages/" title="Python Packages" class="md-nav__link">
      Python Packages
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../python/resources/" title="Python Resources" class="md-nav__link">
      Python Resources
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11" checked>
    
    <label class="md-nav__link" for="nav-11">
      Raspberry pi
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        Raspberry pi
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../adafruit-mini-pi-tft/" title="AdaFruit miniPiTFT" class="md-nav__link">
      AdaFruit miniPiTFT
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../blinkt/" title="Blinkt!" class="md-nav__link">
      Blinkt!
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../raspbian-commands/" title="Raspbian commands" class="md-nav__link">
      Raspbian commands
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11-4" type="checkbox" id="nav-11-4" checked>
    
    <label class="md-nav__link" for="nav-11-4">
      Raspberry pi cluster
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-11-4">
        Raspberry pi cluster
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../part-1/" title="Part 1 - Initial design" class="md-nav__link">
      Part 1 - Initial design
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Part 2 - Smart cooling
      </label>
    
    <a href="./" title="Part 2 - Smart cooling" class="md-nav__link md-nav__link--active">
      Part 2 - Smart cooling
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#parts" title="Parts" class="md-nav__link">
    Parts
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pins-used" title="Pins used" class="md-nav__link">
    Pins used
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#design" title="Design" class="md-nav__link">
    Design
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#electrical-circuit-design" title="Electrical Circuit Design" class="md-nav__link">
    Electrical Circuit Design
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#physical-circuit-layout" title="Physical Circuit Layout" class="md-nav__link">
    Physical Circuit Layout
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing" title="Testing" class="md-nav__link">
    Testing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" title="Troubleshooting" class="md-nav__link">
    Troubleshooting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#future-enhancements" title="Future enhancements" class="md-nav__link">
    Future enhancements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources" title="Resources" class="md-nav__link">
    Resources
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../resources/" title="Cluster resources" class="md-nav__link">
      Cluster resources
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-12" type="checkbox" id="nav-12">
    
    <label class="md-nav__link" for="nav-12">
      Terraform
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-12">
        Terraform
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../terraform/resources/" title="Terraform resources" class="md-nav__link">
      Terraform resources
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#parts" title="Parts" class="md-nav__link">
    Parts
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pins-used" title="Pins used" class="md-nav__link">
    Pins used
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#design" title="Design" class="md-nav__link">
    Design
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#electrical-circuit-design" title="Electrical Circuit Design" class="md-nav__link">
    Electrical Circuit Design
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#physical-circuit-layout" title="Physical Circuit Layout" class="md-nav__link">
    Physical Circuit Layout
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing" title="Testing" class="md-nav__link">
    Testing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" title="Troubleshooting" class="md-nav__link">
    Troubleshooting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#future-enhancements" title="Future enhancements" class="md-nav__link">
    Future enhancements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources" title="Resources" class="md-nav__link">
    Resources
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/agarthetiger/mkdocs/blob/master/docs/raspberry-pi/raspberry-pi-cluster/part-2.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="part-2-smart-cooling">Part 2 - Smart cooling<a class="headerlink" href="#part-2-smart-cooling" title="Permanent link">&para;</a></h1>
<p><img alt="PWM fan controller breakout board for Raspberry Pi" src="../../../img/pwm-fan-breakout-1024.jpg" /></p>
<h3 id="parts">Parts<a class="headerlink" href="#parts" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="https://noctua.at/en/products/fan/nf-a12x25-pwm">Noctua NF-A12x25 12v PWM fan</a></li>
<li><a href="https://shop.pimoroni.com/products/sparkfun-logic-level-converter-bi-directional">SparkFun Logic Level converter</a></li>
<li><a href="https://thepihut.com/products/breakout-pizero">ABElectronics Breakout PiZero prototyping PCB</a></li>
<li><a href="https://uk.farnell.com/molex/47053-1000/connector-header-4pos-1row-2-54mm/dp/2313705">Molex 47053-1000 4 pin pcb mount socket</a></li>
<li>5.5/2.5mm DC socket</li>
<li>12v power supply (from stock)</li>
<li>24awg single core wire</li>
</ul>
<h3 id="pins-used">Pins used<a class="headerlink" href="#pins-used" title="Permanent link">&para;</a></h3>
<ul>
<li>GPIO/BCM 18 - for PWM control to fan, via logic level convert to boost 3.3v GPIO to 5v</li>
<li>GPIO/BCM 6 - for RPM speed monitor, via logic level converter. Input signal in Hz, two pulses per revolution. </li>
</ul>
<h3 id="design">Design<a class="headerlink" href="#design" title="Permanent link">&para;</a></h3>
<p>The SparkFun logic level converter <a href="https://learn.sparkfun.com/tutorials/bi-directional-logic-level-converter-hookup-guide/all#board-overview">board overview</a> shows that each side of the MOSFET has a 10K ohm pull-up resistor. I'm hoping the RPM speed signal can be read using this from a 5v supply using the high voltage side of the logic level converter. </p>
<h3 id="electrical-circuit-design">Electrical Circuit Design<a class="headerlink" href="#electrical-circuit-design" title="Permanent link">&para;</a></h3>
<p>The Raspberry Pi has GPIO pins which can provide a Pulse Width Modulation (PWM) signal. <a href="https://pinout.xyz/">Pinout.xyz</a> is a useful resource for working out the pinout and purposes of the GPIO pins which you can use, as well as seeing which pins various HATs, pHATs and SHIMs use when stacking boards together.</p>
<p><img alt="Raspberry Pi GPIO pinout courtesy of pinout.xyz" src="https://pinout.xyz/resources/raspberry-pi-pinout.png" /></p>
<p>Pinout.xyz was useful in confirming which pins the Blinkt! LED array would use which I'll be stacking on top of this PWM fan control board. As we can see from <a href="https://pinout.xyz/pinout/blinkt">https://pinout.xyz/pinout/blinkt</a> only pins BCM 23 and BCM 24 need to be reserved for the Blinkt! so BCM 18 (PWM0) can be used to generate the PWM signal for the fan and BCM 6 for monitoring the fan speed (BCM 6 was a coin-toss selection, based on it's physical proximity to where the signal wire (at one point) was coming onto the board. </p>
<p>The GPIO pins use 3.3v for I/O, and the Noctua fan needs a 5v PWM signal. Fortunately SparkFun make a cheap (£3) logic level converter which can translate a signal from a low voltage to a high voltage and vice versa. We can use the Raspberry Pi 5v GPIO to power the high voltage side of the board, as the PWM signal draws very little current. </p>
<p><img alt="SparkFun Logic Level Converter circuit design" src="https://cdn.sparkfun.com/r/400-400/assets/f/3/3/4/4/526842ae757b7f1b128b456f.png" /></p>
<p>As the LLC board has pull-up resistors on each side then a second channel can be used for reading the signal from the Noctua fan speed wire, which the <a href="https://noctua.at/pub/media/wysiwyg/Noctua_PWM_specifications_white_paper.pdf">Notcua fan PWM specifications</a> show as needing a pull-up resistor. </p>
<p>Curcuit design to be added...</p>
<h3 id="physical-circuit-layout">Physical Circuit Layout<a class="headerlink" href="#physical-circuit-layout" title="Permanent link">&para;</a></h3>
<p>The Breakout PiZero board was too small for this circuit to wire it nicely. With the logic level converter board being 5 pins wide there was little option but to cross signal and power wires over each other. The wiring under the board is not accessible which I could have used pins and sockets to connect the logic level converter board in a removable way. It does work so it is good enough for purpose, but I'm not proud of the wiring layout which is really not optimal. I chose to use it because it doesn't totally cover the Raspberry Pi 4B it is connected to, which will have CPU load which I don't want throttled due to high CPU temperature. </p>
<h3 id="testing">Testing<a class="headerlink" href="#testing" title="Permanent link">&para;</a></h3>
<p>The system daemon code to control the fan will use the python GPIO libraries (assuming they prove suitable). For initial testing from the command line I'm using (the awesome) WiringPi library. </p>
<p>Reading Gordon's <a href="http://wiringpi.com/wiringpi-deprecated/">deprecation notice</a> for WiringPi it makes me sad that open source contributors receive such poor treatment by a number of consumers for the contributions they have made. I'm sure it is a minority of people, but equally sure that fact does not detract from the impact of their behaviour. </p>
<p>For reference, here are a few quick commands to get testing with. </p>
<div class="codehilite"><pre><span></span><span class="c1"># Get help for the gpio command</span>
man gpio

<span class="c1"># Check the version of gpio, needs v2.52 for Raspberry Pi 4B support</span>
gpio -v

<span class="c1"># See the pinout for your raspberry pi</span>
gpio readall

<span class="c1"># Set the mode for pin 1 to pwm, rather than tristate logic levels</span>
gpio mode <span class="m">1</span> pwm

<span class="c1"># Use gpio pwm &lt;pin&gt; &lt;level&gt;</span>
<span class="c1"># Level 0 is off, eg 0% duty cycle, level 1023 is &#39;on&#39;, eg 100% duty cycle</span>
gpio pwm <span class="m">1</span> <span class="m">512</span>
</pre></div>

<h3 id="troubleshooting">Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permanent link">&para;</a></h3>
<p>My initial circuit would control the fan speed down to it's lowest threshold, but wouldn't turn the fan off completely as it should with a zero duty-cycle (eg. ground) PWM signal to the fan. After sleeping on the problem I realised that I'd not connected the ground from the Pi/Logic level converter to the ground from teh 12v supply which was powering the fan, leaving the PWM "ground" signal floating above the maximum voltage of 0.8v for the PWM low logic level. A bit of rewiring later and things are working as expected. This ground issue was probably also the cause of erroneous RPM readings, which I noticed at the same time as troubleshooting the fan speed. </p>
<h3 id="future-enhancements">Future enhancements<a class="headerlink" href="#future-enhancements" title="Permanent link">&para;</a></h3>
<p>Pins and a detachable connector for the 12v supply leads would be useful, as would some insulation between the underside of the board and the conductive aluminium heatsinks on the Raspberry CPU, which could cause a short if not careful to stabalise the board when connecting or removing the 4 pin fan connector. Hopefully adding standoffs to fix the board in place will help, especially as I will enlarge the mounting holes to M3 size. </p>
<h3 id="resources">Resources<a class="headerlink" href="#resources" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="https://learn.sparkfun.com/tutorials/bi-directional-logic-level-converter-hookup-guide/all">SparkFun logic level converter</a></li>
<li><a href="https://noctua.at/pub/media/wysiwyg/Noctua_PWM_specifications_white_paper.pdf">Notcua fan PWM specifications</a></li>
<li><a href="https://blog.driftking.tw/en/2019/11/Using-Raspberry-Pi-to-Control-a-PWM-Fan-and-Monitor-its-Speed/">https://blog.driftking.tw/en/2019/11/Using-Raspberry-Pi-to-Control-a-PWM-Fan-and-Monitor-its-Speed/</a></li>
</ul>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../part-1/" title="Part 1 - Initial design" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Part 1 - Initial design
              </span>
            </div>
          </a>
        
        
          <a href="../resources/" title="Cluster resources" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Cluster resources
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/agarthetiger" class="md-footer-social__link fa fa-github-alt"></a>
    
      <a href="https://uk.linkedin.com/in/buildthethingright" class="md-footer-social__link fa fa-linkedin"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application.583bbe55.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../.."}})</script>
      
    
    
      
    
  </body>
</html>
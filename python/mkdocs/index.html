



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://agarthetiger.github.io/mkdocs/python/mkdocs/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.0.4">
    
    
      
        <title>MKDocs - Software Engineering Notes</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.451f80e5.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../../#mkdocs" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://agarthetiger.github.io/mkdocs/" title="Software Engineering Notes" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Software Engineering Notes
              </span>
              <span class="md-header-nav__topic">
                MKDocs
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/agarthetiger/mkdocs/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      agarthetiger/mkdocs
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://agarthetiger.github.io/mkdocs/" title="Software Engineering Notes" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Software Engineering Notes
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/agarthetiger/mkdocs/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      agarthetiger/mkdocs
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Ansible
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Ansible
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../ansible/collections/" title="Collections" class="md-nav__link">
      Collections
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ansible/extending-ansible/" title="Extending Ansible" class="md-nav__link">
      Extending Ansible
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ansible/filters/" title="Filters" class="md-nav__link">
      Filters
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ansible/inventory-plugins/" title="Inventory Plugins" class="md-nav__link">
      Inventory Plugins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ansible/local-actions/" title="Local actions" class="md-nav__link">
      Local actions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ansible/lookup-plugins/" title="Lookup Plugins" class="md-nav__link">
      Lookup Plugins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ansible/playbooks/" title="Playbooks" class="md-nav__link">
      Playbooks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ansible/roles/" title="Roles" class="md-nav__link">
      Roles
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ansible/selinux/" title="SELinux" class="md-nav__link">
      SELinux
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ansible/tools/" title="Ansible tools" class="md-nav__link">
      Ansible tools
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ansible/tower/" title="Ansible Tower" class="md-nav__link">
      Ansible Tower
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ansible/vars-and-facts/" title="Vars and Facts" class="md-nav__link">
      Vars and Facts
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Bash
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Bash
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../bash/reference/" title="Bash reference" class="md-nav__link">
      Bash reference
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Cheat sheets
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Cheat sheets
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cheat-sheets/ansible/" title="Ansible Cheat Sheet" class="md-nav__link">
      Ansible Cheat Sheet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cheat-sheets/jenkins/" title="Jenkins" class="md-nav__link">
      Jenkins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cheat-sheets/markdown/" title="Markdown" class="md-nav__link">
      Markdown
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cheat-sheets/python/" title="Python Quick Reference" class="md-nav__link">
      Python Quick Reference
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cheat-sheets/vagrant/" title="Vagrant" class="md-nav__link">
      Vagrant
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Cnc
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Cnc
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cnc/sienci-mill-one/" title="Sienci Mill One" class="md-nav__link">
      Sienci Mill One
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Hints
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Hints
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../hints/ansible/" title="Ansible" class="md-nav__link">
      Ansible
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../hints/bash/" title="ssh" class="md-nav__link">
      ssh
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../hints/bitwarden/" title="Bitwarden" class="md-nav__link">
      Bitwarden
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../hints/find/" title="Find" class="md-nav__link">
      Find
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../hints/podman/" title="Podman" class="md-nav__link">
      Podman
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../hints/poetry/" title="Poetry" class="md-nav__link">
      Poetry
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../hints/python/" title="pip" class="md-nav__link">
      pip
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../hints/zsh/" title="Zsh" class="md-nav__link">
      Zsh
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Jenkins
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Jenkins
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../jenkins/JenkinsPlugins/" title="Jenkins Plugins" class="md-nav__link">
      Jenkins Plugins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../jenkins/PipelineDSL/" title="Pipeline DSL Notes" class="md-nav__link">
      Pipeline DSL Notes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../jenkins/PipelineSteps/" title="Pipeline Steps" class="md-nav__link">
      Pipeline Steps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../jenkins/administration/" title="Jenkins Administration" class="md-nav__link">
      Jenkins Administration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../jenkins/jengu/" title="Jengu" class="md-nav__link">
      Jengu
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Linux
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Linux
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../linux/ius/" title="IUS" class="md-nav__link">
      IUS
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Openshift
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Openshift
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../openshift/glossary/" title="Glossary" class="md-nav__link">
      Glossary
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../openshift/oc-and-ansible-k8s/" title="oc and Ansible k8s" class="md-nav__link">
      oc and Ansible k8s
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Puppet
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Puppet
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../puppet/puppet/" title="Puppet" class="md-nav__link">
      Puppet
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11" checked>
    
    <label class="md-nav__link" for="nav-11">
      Python
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        Python
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
    <a href="./" title="MKDocs" class="md-nav__link md-nav__link--active">
      MKDocs
    </a>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../packages/" title="Python Packages" class="md-nav__link">
      Python Packages
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../resources/" title="Python Resources" class="md-nav__link">
      Python Resources
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-12" type="checkbox" id="nav-12">
    
    <label class="md-nav__link" for="nav-12">
      Raspberry pi
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-12">
        Raspberry pi
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../raspberry-pi/adafruit-mini-pi-tft/" title="AdaFruit miniPiTFT" class="md-nav__link">
      AdaFruit miniPiTFT
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../raspberry-pi/blinkt/" title="Blinkt!" class="md-nav__link">
      Blinkt!
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../raspberry-pi/raspbian-commands/" title="Raspbian commands" class="md-nav__link">
      Raspbian commands
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-12-4" type="checkbox" id="nav-12-4">
    
    <label class="md-nav__link" for="nav-12-4">
      Raspberry pi cluster
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-12-4">
        Raspberry pi cluster
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../raspberry-pi/raspberry-pi-cluster/part-1/" title="Part 1 - Initial design" class="md-nav__link">
      Part 1 - Initial design
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../raspberry-pi/raspberry-pi-cluster/part-2/" title="Part 2 - Smart cooling" class="md-nav__link">
      Part 2 - Smart cooling
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../raspberry-pi/raspberry-pi-cluster/resources/" title="Cluster resources" class="md-nav__link">
      Cluster resources
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-13" type="checkbox" id="nav-13">
    
    <label class="md-nav__link" for="nav-13">
      Terraform
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-13">
        Terraform
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../terraform/resources/" title="Terraform resources" class="md-nav__link">
      Terraform resources
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/agarthetiger/mkdocs/blob/master/docs/python/mkdocs.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="mkdocs">MKDocs<a class="headerlink" href="#mkdocs" title="Permanent link">&para;</a></h1>
<p>This site is built with MKDocs, hosted on GitHub Pages and automatically published on commit to master from Travis CI. </p>
<p>Good documentation is vital for any enterprise IT team to publish shared practices or software components. To empower other teams and allow them to easily consume the output is key, in order to alleviate the publishing team from becoming yet-another-enterprise-bottleneck. MKDocs and GitHub Pages allows teams to publish documentation without having to worry about site hosting, and the documentation can be easily written in markdown. </p>
<h1 id="ci-deployments-to-github-pages-with-travis-ci">CI deployments to GitHub Pages with Travis-CI<a class="headerlink" href="#ci-deployments-to-github-pages-with-travis-ci" title="Permanent link">&para;</a></h1>
<p>To publish from master onto the site served from the gh-pages branch I've used Travis CI for this open source site. I based my .travis.yml file on <a href="https://derekweitzel.com/2017/02/08/deploying-docs-on-github-with-travisci/">Derek Weitzel's blog post</a>. As this was my first time using Travis I didn't initally understand what every line was for. A little piece of me dies whenever I see people cutting and pasting from the internet and executing code, or worse just "curl bash piping", especially in an enterprise organisation when they have no idea what code they are running. I've seen that happen way more times than I'd like. Anyway, here is my breakdown of the original script, followed by my enhancements. </p>
<div class="codehilite"><pre><span></span><span class="n">env</span><span class="o">:</span>
  <span class="n">global</span><span class="o">:</span>
  <span class="o">-</span> <span class="n">GIT_NAME</span><span class="o">:</span> <span class="s2">&quot;&#39;Markdown autodeploy&#39;&quot;</span>
  <span class="o">-</span> <span class="n">GIT_EMAIL</span><span class="o">:</span> <span class="n">djw8605</span><span class="err">@</span><span class="n">gmail</span><span class="o">.</span><span class="na">com</span>
  <span class="o">-</span> <span class="n">GH_REF</span><span class="o">:</span> <span class="n">git</span><span class="err">@</span><span class="n">github</span><span class="o">.</span><span class="na">com</span><span class="o">:</span><span class="n">opensciencegrid</span><span class="o">/</span><span class="n">security</span><span class="o">.</span><span class="na">git</span>
<span class="n">language</span><span class="o">:</span> <span class="n">python</span>
</pre></div>


<p>Set some environment variables to use later in the job. Setting the language to python tells Travis CI to run this job on a docker container with python and pip pre-installed. </p>
<div class="codehilite"><pre><span></span>before_script:
- pip install mkdocs
- pip install MarkdownHighlight
</pre></div>


<p>This before_script phase will run prior to the (build) script section running. In the <a href="https://docs.travis-ci.com/user/job-lifecycle">Job lifecycle</a> Travis CI provides an install phase for installing dependencies which should be used instead. With this script there may be no practical difference between running these steps under the install or before_script phases, however I believe following the patterns intended by the tools is often an easier path to travel in the long term. </p>
<div class="codehilite"><pre><span></span>script:
- openssl aes-256-cbc -K $encrypted_1d262b48bc9b_key -iv $encrypted_1d262b48bc9b_iv -in deploy-key.enc -out deploy-key -d
- chmod 600 deploy-key
- eval `ssh-agent -s`
- ssh-add deploy-key
</pre></div>


<p>MKDocs needs to be able to commit and push to the gh-pages branch in the git repository. The openssl command decrypts the private ssh deploy key, then we limit the permissions and add the key to the running ssh agent. Restricting permissions is required otherwise ssh-add will refuse to add the overly permissive private key file. The eval statement is required to set the apropriate environment variables for the current shell instance so that you can connect to it with ssh-add.  </p>
<div class="codehilite"><pre><span></span>- git config user.name &quot;Automatic Publish&quot;
- git config user.email &quot;djw8605@gmail.com&quot;
- git remote add gh-token &quot;<span class="cp">${</span><span class="n">GH_REF</span><span class="cp">}</span>&quot;;
- git fetch gh-token <span class="err">&amp;&amp;</span> git fetch gh-token gh-pages:gh-pages;
</pre></div>


<p>These steps are required in order for mkdocs to push to the GitHub gh-pages branch. In order to understand why, we need to look at the build log which shows Travis CI running something like the following</p>
<div class="codehilite"><pre><span></span>$ git clone --depth<span class="o">=</span><span class="m">50</span> --branch<span class="o">=</span>master https://github.com/agarthetiger/mkdocs.git agarthetiger/mkdocs
Cloning into <span class="s1">&#39;agarthetiger/mkdocs&#39;</span>...
$ <span class="nb">cd</span> agarthetiger/mkdocs
$ git checkout -qf cffa8d732d907f62a08262db229ee5899e2fc795
</pre></div>


<p>There would be two issues with trying to run <code class="codehilite">mkdocs gh-deploy</code> without the bulk of code in this script phase. First off, the <a href="https://git-scm.com/docs/git-clone#git-clone---depthltdepthgt">--depth option on git clone implies --single-branch</a>. If you add <code class="codehilite">git branch -r</code> or <code class="codehilite">git remote show origin</code> as steps into the script you can see that there is apparently no gh-pages branch in the remote. This behaviour can be changed by specifying git.depth: false in .travis.yml which will cause Travis CI to drop the --depth option and the clone will then fetch all branches. This can also be changed by <a href="https://stackoverflow.com/questions/17714159/how-do-i-undo-a-single-branch-clone">telling git to clone all branches</a> but there is still one more issue. </p>
<p>The other issue is that we haven't provided a GitHub token or credentials to authenticate to the https GitHub remote with, so even if we add the branch to the origin we still can't push. The clone operation works as this is a public GitHub repository. Using a deploy key and ssh is preferable because any exposure of the credentials in this case would only compromise one repository via the deploy key, rather than compromising all repositories if using a GitHub token.</p>
<p>Back to the original script, and adding a 2<sup>nd</sup> remote allows the additional branches to be cloned over ssh and also to be pushed to using the decrypted key added to the ssh agent earlier for authentication. The fetch command can be simplified from the example because the initial <code class="codehilite">git fetch gh-token</code> fetches all branches. </p>
<div class="codehilite"><pre><span></span>- if [ &quot;<span class="cp">${</span><span class="n">TRAVIS_PULL_REQUEST</span><span class="cp">}</span>&quot; = &quot;false&quot; ]; then echo &quot;Pushing to github&quot;; PYTHONPATH=src/ mkdocs gh-deploy -v --clean --remote-name gh-token; git push gh-token gh-pages; fi;
</pre></div>


<p>This line first checks to see whether the build was triggered from a Pull Request. Technically this could be avoided, because what we're doing here is building and deploying the website. We could build the site in the script phase of the .travis.yml file and then have all this ssh, git and deploy code running from the deploy phase. This is because the <a href="https://docs.travis-ci.com/user/deployment/#pull-requests">deploy phase is always skipped for Pull Requests</a>. The <a href="https://docs.travis-ci.com/user/deployment/script/">script provider</a> for deployments requires the script be defined in an external file, which is executed with bash. I've refactored this in my version, as the script example from the blog post is essentially individual bash commands in a yaml dictionary it was quick to translate into a file. Adding <code class="codehilite">set -e</code> to the file also allows the script to fail fast and terminate on the first non-zero exit code from a command. Failing fast on error is possibly but ugly to accomplish in the .travis.yml file, requiring every line to append <code class="codehilite">|| travis_terminate 1</code> and even this approach has <a href="https://github.com/travis-ci/travis-ci/issues/1066#issuecomment-425757599">problems</a>.</p>
<h2 id="travis-ci-enhancements">Travis CI Enhancements<a class="headerlink" href="#travis-ci-enhancements" title="Permanent link">&para;</a></h2>
<p>My yaml file looks like this.</p>
<div class="codehilite"><pre><span></span><span class="n">language</span><span class="o">:</span> <span class="n">python</span>
<span class="n">branches</span><span class="o">:</span>
  <span class="n">only</span><span class="o">:</span>
  <span class="o">-</span> <span class="n">master</span>
<span class="n">git</span><span class="o">:</span>
  <span class="n">depth</span><span class="o">:</span> <span class="mi">1</span>
<span class="n">install</span><span class="o">:</span>
<span class="o">-</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">mkdocs</span>
<span class="o">-</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">mkdocs</span><span class="o">-</span><span class="n">material</span>
<span class="n">script</span><span class="o">:</span>
<span class="o">-</span> <span class="k">if</span> <span class="o">[[</span> <span class="n">$TRAVIS_PULL_REQUEST</span> <span class="o">==</span> <span class="s2">&quot;false&quot;</span> <span class="o">]];</span> <span class="n">then</span> <span class="n">mkdocs</span> <span class="n">build</span> <span class="o">--</span><span class="n">strict</span><span class="o">;</span> <span class="n">fi</span><span class="o">;</span>
<span class="n">deploy</span><span class="o">:</span> 
  <span class="n">skip_cleanup</span><span class="o">:</span> <span class="kc">true</span>
  <span class="n">provider</span><span class="o">:</span> <span class="n">script</span>
  <span class="n">script</span><span class="o">:</span> <span class="n">bash</span> <span class="n">travis</span><span class="o">-</span><span class="n">ci</span><span class="o">/</span><span class="n">deploy</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">gh</span><span class="o">-</span><span class="n">pages</span><span class="o">.</span><span class="na">sh</span>
  <span class="n">on</span><span class="o">:</span>
    <span class="n">branch</span><span class="o">:</span> <span class="n">master</span>
</pre></div>


<p>I kept the --depth option to still shallow clone the repo with a single branch for the build. Using the branches whitelist I could remove the requirement to check the branch name later in the script, and using a deploy phase meant no additional logic is required to check for pull requests or the branch in the shell script travis-ci/deploy-to-gh-pages.sh. deploy.skip_cleanup stops Travis from stashing changes in the workspace between the (build) script and deploy phases. </p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../puppet/puppet/" title="Puppet" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Puppet
              </span>
            </div>
          </a>
        
        
          <a href="../packages/" title="Python Packages" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Python Packages
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/agarthetiger" class="md-footer-social__link fa fa-github-alt"></a>
    
      <a href="https://uk.linkedin.com/in/buildthethingright" class="md-footer-social__link fa fa-linkedin"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.583bbe55.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>